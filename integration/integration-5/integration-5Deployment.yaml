gcloud-sqlproxy:
  enabled: true
  cloudsql:
    instances:
     # GCP instance name.
    - instance: "jade-postgres-101-d0e234edfe378f09"
     # GCP project where the instance exists.
      project: "broad-jade-integration"
     # GCP region where the instance exists.
      region: "us-central1"
     # Port number for the proxy to expose for this instance.
      port: 5432
  rbac:
    create: true
  networkPolicy:
    enabled: false
  existingSecret: sqlproxy-sa-integration-5
  existingSecretKey: sa

datarepo-api:
  enabled: true
  image:
    tag: ca1aab2
  env:
    googleProjectid:  broad-jade-integration
    dbDatarepoUsername:  drmanager
    springProfilesActive:  google,cloudsql,integration-5
    dbStairwayUsername:  drmanager
    dbStairwayUri: jdbc:postgresql://integration-5-jade-gcloud-sqlproxy.integration-5:5432/stairway
    dbDatarepoUri: jdbc:postgresql://integration-5-jade-gcloud-sqlproxy.integration-5:5432/datarepo
  serviceAccount:
    create: true
  rbac:
    create: true
    pspEnabled: true
  existingSecretDB: "database-pwd-integration-5"
  existingDatarepoDbSecretKey: "datarepopassword"
  existingStairwayDbSecretKey: "stairwaypassword"
  existingSecretSA: "jade-sa"
  existingServiceAccountSecretKey: "datareposerviceaccount"

datarepo-ui:
  enabled: true
  image:
    tag: broad-jade-my_2020-02-14_15-04-11
  proxyPass:
    status: http://integration-5-jade-datarepo-api.integration-5:8080/status
    swagger: http://integration-5-jade-datarepo-api.integration-5:8080/swagger-ui.html
    api: http://integration-5-jade-datarepo-api.integration-5:8080
  serviceAccount:
    create: true
  rbac:
    create: true

oidc-proxy:
  enabled: true
  env:
    proxyUrl: http://integration-5-jade-datarepo-ui.integration-5:80/
    proxyUrl2: http://integration-5-jade-datarepo-api.integration-5:8080/api
    proxyUrl3: http://integration-5-jade-datarepo-api.integration-5:8080/register
    logLevel: debug
    serverName: jade.datarepo-integration.broadinstitute.org
    remoteUserClaim: sub
    enableStackdriver: yes
    filter2: AddOutputFilterByType DEFLATE application/json text/plain text/html application/javascript application/x-javascript
  ingress:
    enabled: true
    annotations:
      globalStaticIpName: jade-k8-100-integration-5
  serviceAccount:
    create: true
  rbac:
    create: true
    pspEnabled: true
  existingTlsSecret: oidc-tls-key
